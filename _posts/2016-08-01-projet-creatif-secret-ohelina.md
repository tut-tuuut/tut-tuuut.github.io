---
layout: post
title: "Organiser une chasse au trésor à un mariage"
category: geekerie jeu
tags: 
excerpt: "PCS #17 - nom de code Ohélina"
---

<!-- "sale", dit Tûtie -->
<style>
.post img {
    border: 1px solid #ccc;
}
</style>

Bienvenue sur cet article fleuve qui va vous détailler mon projet créatif secret/stupide de l'été 2016.

À la toute fin du mois de juillet, j'ai été témoin au mariage d'un bon ami avec sa belle chérie. Cet ami étant un gros geek et un compagnon de jeu de longue date, il m'avait demandé ce que je pensais d'une idée qui sortait de l'ordinaire : remplacer les traditionnelles animations de repas de mariage par une sorte de jeu de piste ou de chasse au trésor. J'en pensais tellement de bien que je me suis lancée à peu près aussitôt dans la réalisation du truc. Je vous livre ici un retour d'expérience au cas où vous voudriez faire pareil (et aussi pour moi, au cas où je voudrais recommencer).

En résumé : je me suis beaucoup amusée mais j'ai pas beaucoup dormi.

## Un mariage

On a dès le début imaginé le principe suivant :

* chaque énigme, une fois résolue, pointe vers une *personne* qui est un complice du jeu et qui donne l'énigme suivante ainsi qu'un petit carton révélant un bout de l'histoire des mariés,
* si des indices sont disponibles dans la salle, ils sont *discrets* et *inamovibles*.

Plusieurs raisons à ce choix :

* un public d'invités de mariage est hétéroclite : tout le monde ne veut pas jouer (donc pas la peine de pourrir la déco outre mesure) et l'alcool tend à rendre les gens plaisantins (c'est-à-dire enclins à décoller des bouts de papiers intrigants) ;
* on n'a pas forcément beaucoup de temps ni d'informations (type plan ou photos) pour préparer le jeu de piste sur place (coller des indices, cacher des éléments…)

## Ce mariage

Quelques difficultés supplémentaires propres à ce mariage en particulier sont venues pimenter la conception et l'organisation du jeu :

1. la moitié de l'assemblée est Finlandaise et ne parle pas un mot de français,
2. l'autre moitié de l'assemblée est Française et ne parle pas un mot de finnois,
3. les mariés habitent à Helsinki,
4. j'ai une fille de deux ans et demi environ qui est très demandeuse d'attention,
5. j'ai une fille de zéro ans et demi environ qui est très demandeuse de mes nichons.

C'est là qu'on se dit que le projet commence à être ambitieux. Tant pis, je me suis lancée. :D

## Organisation et réalisation

La conception des énigmes a pris environ deux mois en régime réduit (cf. difficultés n°4 et n°5) avec une accélération du rythme à la fin. J'ai tout mis en page sur Apple pages qui était le logiciel de traitement de texte le plus stable que j'avais à disposition (Libre Office fait parfois des BSOD sur mon nordi, j'avais pas envie).

Au fur et à mesure que je concevais les énigmes, je collais les phrases d'instructions dans un google doc que la fiancée finnoise (et tout à fait psychorigide de la grammaire comme j'aime bien) les traduise. Ainsi, j'ai eu la plupart des énigmes billingues français-finnois. Certaines nécessitaient même de parler français ET finnois pour être résolues. Certaines ont cependant été rédigées en anglais (et nécessitaient donc de ne parler ni français ni finnois).

Une semaine avant le mariage, j'ai fait tester trois énigmes un peu complexes à des cobayes (mon petit frère et sa copine) pour vérifier qu'il n'y avait pas de souci. Il y en avait. Et des bien gras, encore. J'ai bien fait.

Je comptais imprimer les énigmes à la COREP (pas cher pas cher, 3 centimes la page) mais à cause de difficultés d'organisation, j'ai partagé les impressions entre une imprimante perso et un imprimeur bien plus cher, pendant la semaine précédant immédiatement le mariage. Il y a aussi certains bouts d'énigmes que j'ai écrits à la main. (Pas ceux qu'il me fallait en 15 exemplaires, heureusement !)

La veille du mariage, j'ai également préparé les cartons « récompense » en découpant (avec des ciseaux roses à paillettes) et collant les bouts de l'histoire des mariés sur des photos du couple. Dans la foulée je les ai mis dans des enveloppes avec les papiers contenant les textes des énigmes. J'ai fini à 3h30 du matin. Hum. Notes pour plus tard : utiliser un massicot et préparer largement à l'avance tout ce qui peut l'être.

J'ai scotché une partie des indices dans la salle la veille du mariage, avec bébé dans le porte-bébé. Une partie était également intégrée dans le trombinoscope des invités conçu par les mariés. (On envisageait aussi d'en cacher certains dans les menus, mais tout le monde était beaucoup trop à l'arrache pour ça.) J'ai scotché la fin des indices dans la salle… au début du vin d'honneur. LARGE !


## Déroulement du jeu

À la fin du vin d'honneur, j'ai écrit et accroché un petit panneau « vous voulez jouer ? Allez parler au témoin qui a le plus de filles… » avec la traduction en anglais (je n'avais pas de Finlandais sous la main pour la traduction en finnois). Cela constituait une première énigme assez soft pour entraîner les joueurs à chercher un peu. On a évité de faire une annonce : c'était beaucoup plus amusant de laisser traîner des indices mystérieux dans la salle et de piquer ainsi l'attention des invités.

J'ai également confié à chaque « complice » un paquet de 15 enveloppes identiques, en leur reprécisant le mot de passe qui leur correspondait. (Natacha, qui était pointée par l'énigme n°2, donnait l'énoncé de l'énigme n°3 quand on lui donnait le mot de passe n°2.) J'ai réexpliqué le principe du jeu, et bien insisté sur le fait qu'ils pouvaient jouer aussi : ils connaissaient un mot de passe, mais ils ne savaient pas de quelle énigme ils étaient la solution, ni à quel niveau du jeu leur énigme se situait.

Ensuite, j'ai attendu que le jeu se lance. Quelques invités ont vu le panneau et sont venus me trouver. Je leur ai expliqué et je leur ai donné l'enveloppe contenant la première énigme. Ensuite, d'autres invités ont vu les premiers joueurs et leur ont demandé où ils avaient trouvé le jeu, et de fil en aiguille une dizaine d'équipes d'horizons divers se sont lancées sur la piste.

Par la suite, je suis restée à disposition des joueurs pour les aider en cas de problème ou pour être prête en cas de bug. Du moins, jusqu'à ce que j'essaie d'endormir mon bébé à l'hôtel et que je m'endorme par la même occasion. Heureusement, le gros bug de la troisième énigme a été découvert et contourné avant que je m'endorme en sursaut.

Aux dernières nouvelles, seules deux équipes sont arrivées au bout de la dernière énigme. Il semble que le soufflé soit retombé quand le dancefloor a commencé à s'enflammer.

## Difficultés rencontrées

En concevant les énigmes, j'ai surtout eu du mal à doser la difficulté. J'ai aussi constaté en « lâchant » les joueurs sur mes énigmes que les difficultés n'étaient pas du tout où je le pensais. (Détails plus bas dans la liste des énigmes.)

J'ai pondu une énigme (sur 9) complètement insoluble à cause d'un accident de mise en page à 1 ou 2 heures du matin. Note pour plus tard : vérifier la mise en page une fois que le jour est levé.

Et enfin, contrairement à d'autres, je parle beaucoup moins bien les langues étrangères quand je suis fatiguée ou alcoolisée. (Big up à mon mari qui parle très bien japonais quand il est bourré !) Cela complique la communication avec les joueurs finlandais quand la nuit est tombée.

Si c'était à refaire, je prendrais également un bon baby-sitter pour les mois de conception et pour le soir du mariage : trop compliqué de faire travailler les neurones à côté d'un bébé qui braille, et trop dur physiquement de surveiller 2 gamines en bas âge en même temps qu'une troupe de joueurs enthousiastes.

## Les énigmes

Voici les neuf énigmes que j'ai terminées. Vous constaterez qu'elles sont d'inspirations diverses… Il y en a aussi quelques-unes que j'ai inventées de zéro.

### Nuit étoilée

Je cherchais un moyen pour les Finnois et les Français de « briser la glace ». J'ai donc imaginé cette énigme où il faut relier les mots en français avec leur équivalent en finnois. Les traits forment le prénom du complice, le mot isolé est le mot de passe.

![](/img/2016/mariage/stars.jpg)

Pour cette énigme j'ai choisi le complice en fonction des lettres composant son prénom : il me fallait beaucoup de lignes droites. Il y avait juste un « C » que j'avais du mal à former avec ce système. Je ne sais plus à quel moment j'avais ajouté les étoiles, mais au final elles m'arrangeaient bien : j'ai ajouté la lune pour former le C. Ce qui ressemblait à de la déco se révélait au final être un bout de la solution. :)

Cette énigme, placée plutôt au début du jeu, a très bien marché pour faire discuter les francophones et les… euh… finnoiphones ? Tous les joueurs que j'ai vus jouaient le jeu, je n'ai attrapé personne sur google translate en 3G. En outre je suis très satisfaite du rendu visuel, j'aime beaucoup les étoiles qui forment des constellations bizarres.

### Été indien à Kuusamo

La chanson _L'été Indien_ de Joe Dassin a été reprise en finnois par un artiste Finlandais, et elle ne parle pas _du tout_ de la même chose. J'ai voulu caser cela dans une énigme, mais comment ? Je me suis souvenue d'un épisode de Sherlock où il est question d'un message codé à l'aide d'un livre via un procédé appelé _book cipher_. À la place d'un livre, j'ai utilisé les paroles comme code de base pour cacher un message dedans. (Ne googlez pas si vous voulez tester l'énigme.)

J'ai ajouté une couche de mystère en utilisant des vieux chiffres indiens à la place de ces chers chiffres arabes. Il y avait donc ces messages dans la salle :

![](/img/2016/mariage/msg-fi.png)

Ainsi que les paroles des chansons, accrochées aux toilettes :

![](/img/2016/mariage/ete-indien.png)

![](/img/2016/mariage/kuusmao.png)

Et les participants disposaient de ceci dans leur enveloppe :

![](/img/2016/mariage/ete-indien-a-kuusamo.png)

Si vous êtes inconditionnel(le) de Joe Dassin, vous remarquerez que j'ai modifié légèrement les paroles de la chanson française pour coller à mes besoins. Une équipe de jeunes technophiles qui avait pris la version originale sur Google a donc eu un peu de mal.

Quant à la version finnoise, eh bien… Vu que j'avais passé le texte sur 2 colonnes, certains vers ont été coupés sur deux lignes… Donc toute la numérotation dont dépendait l'énigme était cassée dès la ligne 5 ou 6. OUPS. Nous nous sommes contentés d'écrire en gros le nom et le prénom de la personne « complice ».

Pour cette énigme, j'avais peur que le système de codage soit trop obscur et que les joueurs restent coincés, ne sachant que faire. Finalement, elle a très bien fonctionné. La difficulté était juste assez bien dosée pour que la récompense soit accessible sans être donnée toute cuite.

En tout cas, même si l'énigme était insoluble, c'était très amusant de voir des groupes hétéroclites de joueurs s'amasser aux toilettes pour compter les vers de chansons à la noix.

### Sudoku itinérant

Comme on ne voulait pas faire que des énigmes de type « cahier d'activités » ainsi que mon cher marié les a désignées, j'ai mijoté quelques énigmes qui obligeraient les joueurs à fouiner et à ouvrir l'œil.

C'est comme ça que je me suis retrouvée à scotcher un peu partout les morceaux d'une grille de sudoku soigneusement choisie.

![](/img/2016/mariage/sudoku1.png)

Comment cache-t-on un message dans une grille de sudoku ? Fastoche, en associant une lettre à chaque chiffre ! On peut également proposer une grille contenant uniquement les lettres, mais cela nécessite que le message contienne 9 lettres distinctes. Et je n'avais aucun invité dont le prénom était constitué de 9 lettres distinctes.

![](/img/2016/mariage/sudoku2.png)

Comment cache-t-on _deux_ messages dans une grille de sudoku ? Fastoche, il suffit que le deuxième message soit un anagramme du premier… et que la grille de sudoku soit bien fichue.

Pour obtenir un anagramme du prénom de mon complice, j'ai utilisé anagramme.org, un site fort utile (probablement initialement destiné aux joueurs de Scrabble).

Pour obtenir une grille « bien fichue », j'ai un peu plus galéré déjà. (Euphémisme.)

J'avais téléchargé des cahiers de sudoku en PDF, contenant des grilles et les solutions dans un format copiable-collable au format texte.

J'ai commencé par faire les remplacements avec mon éditeur de texte avant de chercher avec mes petits yeux si je voyais quelque part l'annagrame recherché. Ça faisait 18&times;9 rechercher-remplacer pour une seule grille, et mes petits yeux ne trouvaient pas grand-chose vu que mon heure théorique de coucher était largement dépassée.

Alors j'ai fait plus efficace (et franchement moins fatigant si vous voulez mon avis) : j'ai écrit un programme qui analyse les solutions à la recherche d'une grille contenant les deux anagrammes que je voulais.

C'est la première fois que j'utilise un algorithme de recherche « en profondeur d'abord » pour résoudre un vrai problème, hors du contexte d'un exercice de cours ou d'un entretien d'embauche. Je vous livre ici le cœur de l'analyse (un terme simple pour désigner les 15 lignes vaguement élégantes d'un fichier qui en compte 175).

{% highlight php %}
<?php
// $i et $j (entiers) = position horizontale et verticale du curseur ds le sudoku
// $index (entier) = position dans le terme de recherche
// $graph (tableau) = grille de lettres
// $search (chaîne de caractères) = terme recherché
// $direction (entier 0, 1 ou 2) = direction dans laquelle on cherche
function analyse_char($i, $j, $index, $graph, $search, $direction) {
    if ($i > 8 || $j > 8) {
        return;
    }

    if ($graph[$i][$j] == $search[$index]) {
        if ($index === strlen($search) - 1) {
            echo "found $search !!!".PHP_EOL;
            display_anagramme($graph);
            return true;
        }
        if ($direction === 0 || $direction === 1) {
            // on cherche verticalement
            analyse_char($i+1, $j, $index + 1, $graph, $search, 1);
        }
        if ($direction === 0 || $direction === 2) {
            // on cherche horizontalement
            analyse_char($i, $j+1, $index + 1, $graph, $search, 2);
        }
    }
}
?>
{% endhighlight %}

Si vous voulez voir le programme en entier, [je vous en prie](/img/2016/mariage/solution-cherchons.php). Il y a pas mal de code pour construire des tableaux à partir de la solution copiée-collée depuis mon PDF, ensuite du code pour rechercher-remplacer les chiffres par la grille de correspondance désirée (bonus j'ai galéré en UTF8 et j'ai pas cherché à comprendre) et finalement la recherche elle-même dans la grille de lettres.

En bonne victime du syndrome de l'imposteur, j'ai envie de cacher la source de ce programme parce qu'elle est « moche », probablement trop verbeuse par endroits et pas assez à d'autres, mal optimisée côté CPU et conso mémoire. Peut-être qu'elle ne passerait aucune revue de code, mais elle est _vraie_. Je sais qu'elle fonctionne.

Donc je vous l'offre. Si jamais vous avez envie de cacher des anagrammes dans un sudoku, sait-on jamais… ou si vous voulez vous décomplexer un peu. Vous n'êtes pas lela seul(e) à écrire du code moche et jetable !

(Dans quelques semaines, je donne une [conférence](https://www.paris-web.fr/2016/conferences/liberee-delivree-du-syndrome-de-limposteur.php) à Paris Web sur le sujet du syndrome de l'imposteur… donc je travaille assez fort sur le mien ces temps-ci.)

Cette énigme était assez loin dans la chaîne et elle n'a pas été tentée par beaucoup de joueurs. Une fois atteinte, elle ne leur a cependant pas présenté de difficulté particulière. Tant mieux pour eux.

### Mots fléchés sur les mariés

Je ne sais pas vous, mais dans les mariages que je fréquente, les mots fléchés sur les mariés sont un grand classique. En outre, c'est très facile à concevoir et c'est un bon moyen de faire découvrir  aux invités curieux des petits détails sympathiques sur le couple.

![](/img/2016/mariage/motsfleches.png)


Bon. Ben c'est (inutilement) difficile à résoudre par les invités. Surtout que les mariés s'étaient bien lâchés sur les petits détails difficiles à deviner…

C'était une énigme de début de chaîne. J'ai peur qu'elle ait un peu trop filtré les participants…

Une difficulté supplémentaire de ce jeu-là a été la contrainte « billingue franco-finnois ». J'ai dû préciser dans certaines définitions si le terme était attendu en français ou en finnois.

Le mot de passe à trouver était le nom de cette danse, que je vous laisse découvrir et fredonner inlassablement pendant les prochaines 48 heures :

<iframe width="560" height="315" src="https://www.youtube.com/embed/bagc7HlKf3w" frameborder="0" allowfullscreen></iframe>

### FedEx Quest

Vous savez ce qu'est une quête FedEx ? Si non, vous en avez de la chance ! C'est que vous n'avez pas assez joué aux jeux vidéo.

![](/img/2016/mariage/fedex.png)

Le principe était le suivant : on commençait avec un picross muet, qui donnait un indice indiquant une affichette dans la salle (en l'occurrence un Link de _Ocarina of Time_). Au verso de l'affichette, une image suggérait une autre affiche… et ainsi de suite jusqu'à l'ultime affichette qui donnait le mot de passe et le complice à qui le dire.

Tout à fait billingue car muette, cette énigme fait appel à la culture vidéoludique des joueurs. Le Picross du début a été éhontément pompé dans le jeu _Picross DS_ (auquel pour la petite histoire j'ai beaucoup beaucoup joué en 2007 entre les épreuves des concours de l'ENS au lieu de réviser — j'alternais avec _The Wind Waker_). Je l'ai testé en conditions réelles de fatigue, ce qui m'a conduit à ajouter quelques indices.

### Code Cochon

Quatre jours avant le mariage, il me manquait encore quelques énigmes alors j'ai demandé à mon mari (alors dans un tram à 600 kilomètres de moi) s'il avait une idée. Il m'a dit « code cochon », j'ai dit « quoi ?? » il a répété « code cochon » et j'ai rétorqué que j'avais pas besoin de trucs cochons. En fait ce n'est pas cochon du tout, c'est un grand classique des scouts. (Le nom vient en fait de la ressemblance avec des enclos à cochons…)

![](/img/2016/mariage/code-cochon.png)


J'ai commencé à tracer les signes du code en dessin dans mon logiciel, j'ai terminé 1h30 plus tard sur un [site de scouts](https://www.latoilescoute.net/decodeur/) qui faisait l'encodage automatiquement et je m'en suis sortie en 20 minutes.

J'ai toutefois ajouté les accents français et les ¨ finnois sur les signes du code. On est psychorigide de l'orthographe ou on ne l'est pas, hé.

### Le renard brun rapide

Elle, c'est mon énigme préférée.

Dans l'enveloppe, il n'y avait que ceci :

![](/img/2016/mariage/quickbrownfox-enigme.png)

Des signes étranges, un titre mystérieux qui constitue probablement un indice… C'est ce genre d'ambiance que j'adorais dans les énigmes d'Ouverture Facile. À première vue on se demande bien ce qu'on va pouvoir faire avec ce truc, et quand on atteint le moment « aha » où tout se met en place, on se sent prodigieusement intelligent.

Il y avait également cette affichette dans la salle :

![](/img/2016/mariage/quickbrownfox-pangram.jpg)

Pour être honnête, je la trouve encore un peu trop facile. Si j'avais voulu offrir une vraie belle réflexion aux joueurs, j'aurais enlevé TOUS les textes. J'ai préféré laisser quelques mots à googler aux brebis égarées qui auraient moins de culture typo que moi.

L'idée, géniale, a été éhontément pompée sur le jeu vidéo Fez (auquel vous DEVEZ jouer si vous ne le connaissez pas).

### Morse's hexaflexagon

Je voulais une énigme qui fasse faire quelques menus travaux manuels à mes joueurs. Le pliage me semblait de circonstance. Au début je voulais leur faire faire une cocotte en papier, je réfléchissais à un moyen de cacher un message sur une cocotte, et puis… mon marié m'a montré les hexaflexagones.

Qu'est-ce qu'un hexaflexagone ? En résumé : un truc trop cool.

<iframe width="560" height="315" src="https://www.youtube.com/embed/aQo8tYQuWQw" frameborder="0" allowfullscreen></iframe>

J'ai plié mon premier hexaflexagone le jour de mon anniversaire. Et j'en ai plié quelques autres les jours qui ont suivi pour concevoir mon énigme.

L'avantage de l'hexaflexagone sur la cocotte, outre que c'est trop cool, c'est que les messages sont beaucoup mieux cachés dessus avant le pliage. Et comme peu d'invités connaissaient avant le mariage, beaucoup ont découvert quelque chose !

Pour cette énigme-là, j'ai donc conçu un hexaflexagone à 6 faces à plier soi-même. Il a aussi fallu que je conçoive des instructions de montage qui ne dépendent pas des « numéros » des faces. C'est pour cela que j'ai fait tester cette énigme à des « vrais » cobayes : moi je savais faire donc je n'avais pas moyen de savoir si mes explications fonctionnaient. (Verdict : elles fonctionnaient, mais le message était encodé n'importe comment. Ne codez rien en morse à 1 heure du matin sans vous relire ensuite.)

![](/img/2016/mariage/hexaflexagon.png)

![](/img/2016/mariage/hexaflexagon2.png)


J'ai choisi de coder les messages en morse pour que ça soit joli avant pliage et pas trop évident à lire sans plier-coller le flexagone. Mais au final il aurait suffi aux joueurs de décoder le morse sans rien découper ni plier, puis de remettre dans l'ordre les morceaux de phrases qui apparaissaient.

Il était difficile de trouver la face 5. Dommage : c'est sur celle-là que le mot de passe avait atterri. Les joueurs ont fini par décoller et déplier leur hexaflexagone de manière tout à fait barbare (mais efficace).

À noter : à l'impression, j'ai eu un recto-verso parfait, donc les hexaflexagones produits ce soir-là l'étaient aussi.

### Coloriage de marques

Une énigme de type « cahier d'activités » qui a bien marché pour détendre les invités entre deux méchantes énigmes tout en faisant marcher leur culture générale (ainsi que leur smartphone en 4G). Découvrez les affichages 10 segments, une invention photoshop maison.

![](/img/2016/mariage/marques.png)

Pour trouver les marques, j'ai beaucoup utilisé wikipedia mais également des articles de blog ou de forum d'expatriés en Finlande. Mention spéciale à [la liste des meilleures et pires bières finlandaises](http://www.happybeertime.com/blog/2013/07/10/voyage-en-finlande-les-bieres-tops-et-les-bieres-flops/).

## Voilà.

C'était cool. Merci d'avoir lu jusque-là.

(Non, je ne ferai pas pareil à votre mariage.)

(Ou alors… seulement si vous me payez une bb-sitter à 17 € l'heure charges comprises pendant 2 mois.)
